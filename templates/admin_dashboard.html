<!DOCTYPE html>
<html>
<head>
    <title>Admin CRM Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="admin-portal">

    <!-- ================= SIDEBAR ================= -->
    <div class="admin-sidebar">
        <h2>üëë Admin CRM</h2>

        <a href="/admin_dashboard" class="active">üìä Dashboard</a>
        <a href="/employees">üë®‚Äçüíº Employees</a>
        <a href="/logout">üö™ Logout</a>
    </div>


    <!-- ================= MAIN CONTENT ================= -->
    <div class="admin-main">

        <!-- ================= TOP NAVBAR ================= -->
        <div class="admin-navbar">
            <h1>CARE College CRM Portal</h1>
            <div class="admin-user">
                Admin: {{ session["username"] }}
            </div>
        </div>


        <!-- ================= DASHBOARD CARDS ================= -->
        <div class="admin-cards">
            <div class="admin-card">
                <h3>Total Customers</h3>
                <p>{{ customers|length }}</p>
            </div>

            <div class="admin-card">
                <h3>Total Employees</h3>
                <p>{{ employees|length }}</p>
            </div>

            <div class="admin-card">
                <h3>Total Teams</h3>
                <p>{{ teams|length }}</p>
            </div>
        </div>


        <!-- ================= ADD EMPLOYEE ================= -->
        <div class="admin-box">
            <h3>‚ûï Add Employee</h3>

            <form method="POST" action="/add_employee">
                <input type="text" name="name" placeholder="Employee Name" required>
                <input type="text" name="phone" placeholder="Phone Number" required>
                <input type="text" name="username" placeholder="Login Username" required>
                <input type="password" name="password" placeholder="Login Password" required>

                <button type="submit">Add Employee</button>
            </form>
        </div>


        <!-- ================= ADD CUSTOMER ================= -->
        <div class="admin-box">
            <h3>‚ûï Add Customer Manually</h3>

            <form method="POST" action="/add_customer">
                <input type="text" name="cust_name" placeholder="Customer Name" required>
                <input type="text" name="cust_phone" placeholder="Customer Phone" required>
                <input type="email" name="cust_email" placeholder="Customer Email" required>

                <select name="cust_gender" required>
                    <option value="">-- Select Gender --</option>
                    <option>Male</option>
                    <option>Female</option>
                    <option>Other</option>
                </select>

                <input type="text" name="cust_address" placeholder="Customer Address" required>

                <button type="submit">Add Customer</button>
            </form>
        </div>


        <!-- ================= EXCEL UPLOAD ================= -->
        <div class="admin-box">
            <h3>üìÇ Upload Customers via Excel</h3>

            <form method="POST" action="/upload_customers" enctype="multipart/form-data">
                <input type="file" name="file" required>
                <button type="submit">Upload Excel</button>
            </form>
        </div>


        <!-- ================= TEAM MANAGEMENT ================= -->
        <div class="admin-box">
            <h3>üë• Team Management</h3>

            <!-- Create Team -->
            <form method="POST" action="/create_team">
                <input type="text" name="team_name" placeholder="Enter Team Name" required>
                <button type="submit">+ Create Team</button>
            </form>

            <hr style="margin:20px 0;">

            <!-- Assign Employee -->
            <form method="POST" action="/add_team_member">

                <select name="team_id" required>
                    <option value="">-- Select Team --</option>
                    {% for t in teams %}
                    <option value="{{ t[0] }}">{{ t[1] }}</option>
                    {% endfor %}
                </select>

                <select name="employee_id" required>
                    <option value="">-- Select Employee --</option>
                    {% for e in employees %}
                    <option value="{{ e[0] }}">{{ e[1] }}</option>
                    {% endfor %}
                </select>

                <button type="submit">Assign Employee</button>
            </form>
        </div>


        <!-- ================= CUSTOMER LIST ================= -->
        <div class="admin-box">
            <h3>üìã Customer List</h3>

            <table>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Gender</th>
                    <th>Address</th>
                    <th>Status</th>
                </tr>

                {% for c in customers %}
                <tr>
                    <td>{{ c[0] }}</td>
                    <td>{{ c[1] }}</td>
                    <td>{{ c[2] }}</td>
                    <td>{{ c[3] }}</td>
                    <td>{{ c[4] }}</td>
                    <td>{{ c[5] }}</td>
                    <td><b>{{ c[6] }}</b></td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- ================= CLEAR CALL HISTORY ================= -->
    <div class="admin-section">
        <h3>üßπ Call History Management</h3>

        <form method="POST" action="/clear_history">
            <button type="submit" style="background:#dc3545;">
                ‚ùå Clear All Call History
            </button>
        </form>
    </div>

    </div>
</div>

</body>
</html>
