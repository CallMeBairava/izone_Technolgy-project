<!DOCTYPE html>
<html>
<head>
    <title>Employees List</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
<div class="background-shape"></div>

<div class="page-container">

    <!-- PAGE HEADER -->
    <div class="page-header">
        <h1>üë®‚Äçüíº Employees Management</h1>
        <a href="/admin_dashboard" class="back-btn">‚¨Ö Back</a>
    </div>

    <!-- SEARCH BAR -->
    <div class="search-box">
        <input type="text" id="empSearch"
               placeholder="üîç Search Employee by Name or Phone...">
    </div>

    <!-- EMPLOYEE TABLE CARD -->
    <div class="table-card">

        <table id="employeeTable">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Phone</th>
                <th>Username</th>
                <th>Action</th>
            </tr>

            {% for e in employees %}
            <tr class="emp-row">
                <td>{{ e[0] }}</td>
                <td class="emp-name">{{ e[1] }}</td>
                <td class="emp-phone">{{ e[2] }}</td>
                <td>{{ e[3] }}</td>
                <td>
                    <a href="/edit_employee/{{ e[0] }}" class="edit-btn">
                        ‚úè Edit
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>

    </div>

</div>

<!-- SEARCH SCRIPT -->
<script>
    const searchInput = document.getElementById("empSearch");
    const rows = document.querySelectorAll(".emp-row");

    searchInput.addEventListener("keyup", function () {
        let value = searchInput.value.toLowerCase();

        rows.forEach(row => {
            let name = row.querySelector(".emp-name").innerText.toLowerCase();
            let phone = row.querySelector(".emp-phone").innerText.toLowerCase();

            if (name.includes(value) || phone.includes(value)) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        });
    });
</script>

</body>
</html>
